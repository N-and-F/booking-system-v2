@using reservationSystem.Models
@using reservationSystem.BusinessLogic
@using reservationSystem.Enums
@inject ISnackbar Snackbar

<MudDialog Style="width: 500px; overflow: hidden" DisableSidePadding="true">

    <DialogContent>

        <MudGrid Style="text-align: center; margin-bottom: 10px">
            <MudItem xs="12">
                <MudText Typo="Typo.h5" Style="font-weight: 500; text-align: center;">Delete Booking</MudText>
            </MudItem>
            <MudItem xs="12">
                <MudText Typo="Typo.subtitle1" Style="font-weight: 400; text-align: center;">Are you sure you want to delete this booking?</MudText>
            </MudItem>
            <MudItem xs="6">
                <MudButton Variant="Variant.Filled"
                           OnClick="Cancel">Cancel</MudButton>
            </MudItem>
            <MudItem xs="6">
                <MudButton Variant="Variant.Filled"
                           Color="Color.Error"
                           OnClick="HandleDeleteButton">Delete</MudButton>
            </MudItem>
        </MudGrid>
    </DialogContent>


</MudDialog>

@code {
    [CascadingParameter] MudDialogInstance MudDialog { get; set; }
    [Parameter] public Booking Booking { get; set; }

    [Inject]
    private BookingsLogic BookingsLogic { get; set; }

    private void Cancel()
    {
        MudDialog.Cancel();
    }

    private async void HandleDeleteButton()
    {
        await BookingsLogic.DeleteBooking(Booking.Id);
        Snackbar.Add("Booking was successfully deleted", Severity.Success);
        MudDialog.Close(DialogResult.Ok(Booking));
    }
}